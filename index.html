<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POE 2 Trade Terminal - Native</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        :root {
            --primary: #6366f1;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --border: #e2e8f0;
        }
        body { 
            font-family: system-ui, -apple-system, sans-serif; 
            background: var(--bg); 
            color: var(--text);
            margin: 0; padding: 20px;
        }
        .container { max-width: 1100px; margin: 0 auto; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .card { background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid var(--border); box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .stat-val { font-size: 24px; font-weight: bold; color: var(--primary); margin: 5px 0; }
        .table-container { background: var(--card); border-radius: 12px; border: 1px solid var(--border); overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; text-align: left; }
        th { background: #f1f5f9; padding: 12px; font-size: 13px; color: #64748b; }
        td { padding: 12px; border-top: 1px solid var(--border); font-size: 14px; }
        .badge { background: #e0e7ff; color: #4338ca; padding: 2px 8px; border-radius: 4px; font-weight: bold; }
        .price-drop { color: #ef4444; font-weight: bold; font-size: 11px; }
        .search-bar { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border); margin-bottom: 20px; box-sizing: border-box; }
        
        /* Simple SVG Chart Styles */
        .chart-svg { width: 100%; height: 200px; background: #fff; }
        .bar { fill: var(--primary); transition: opacity 0.2s; }
        .bar:hover { opacity: 0.8; }
        .axis-line { stroke: #cbd5e1; stroke-width: 1; }
        .chart-label { font-size: 10px; fill: #94a3b8; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        const RAW_DATA = `
1/11/2026, 14:42:31,0af48314bb81af9bb14e403a564fb1e19ab2b28aa05bf292fd6fb6d6c095cfac,Onslaught Roar,650,355,Baloch#1592,listed 15 minutes ago,80% increased Critical Hit Chance for Spells,Sum: 50,Sum: 80,Sum: 225
1/11/2026, 14:42:31,8f1e9e25c2f0646c28c9e68a2400711d4b11094f65aee254281dbae445d61fc4,Miracle Spire,675,466,Rmarkey#6383,listed 20 hours ago,235% increased Spell Damage,Sum: 52,Sum: 95,Sum: 319
1/11/2026, 14:42:31,be6f47a18edd07991ef5f4cda028319129a53c8d819a8ff15271d547f1677aa4,Rune Mast,700,394,Shirocco22#1718,listed 3 hours ago,42% increased Cast Speed,Gain 38% of Damage as Extra Fire Damage,Sum: 92,Sum: 86,Sum: 216
1/11/2026, 14:42:31,4fa095286c0166001b6be089ed98fd1f570d6b25f2aa7d1c0dc2b274b8bf9524,Pandemonium Spell,800,399,relicym#2478,listed 9 hours ago,208% increased Spell Damage,Sum: 110,Sum: 81,Sum: 208
1/11/2026, 14:42:31,e59bde4e81cfcc4df2af3e8a0ead9477adf5ffe8cac49264a83261d8ff8e44ec,Apocalypse Spire,800,397,irosshh#8039,listed 4 hours ago,Gain 68% of Damage as Extra Cold Damage,Sum: 68,Sum: 81,Sum: 248
1/11/2026, 14:42:31,3ac4e154282dddb58672e8d59965be8bda2d8075515ee8e38f45bb0d98401456,Doom Pile,800,471,TheLastDance#8418,listed a day ago,235% increased Spell Damage,43% increased Cast Speed,Sum: 59,Sum: 89,Sum: 323
1/11/2026, 14:42:31,cd0c07c0e9792260ab34f008d800205432e1b38cf4b92f84183554242ed24450,Horror Weaver,800,409,XDerBos#5227,listed 7 hours ago,224% increased Spell Damage,Gain 63% of Damage as Extra Fire Damage,Sum: 105,Sum: 80,Sum: 224
1/11/2026, 14:42:31,9fceb73ad5ebd62632d682aa0fc957b441b761f34fe6ba54837a39a6d4a931e6,Kraken Pole,880,411,gentle666#3975,listed 11 hours ago,Gain 50% of Damage as Extra Cold Damage,Sum: 100,Sum: 106,Sum: 205
1/11/2026, 14:42:31,a2b2543cd8d9c37f190f140b1207d9b5cfbac29d591d371d1f3b1a75816aa9e6,Blood Roar,900,435,coven#2580,listed 6 hours ago,41% increased Cast Speed,Sum: 116,Sum: 87,Sum: 232
1/11/2026, 14:42:31,4600ecafd9d8992dedbcef7b4cba0776939e9a7dc6afd22bf06d397a00f20145,Soul Beam,950,451,yapobrilsya#4618,listed 14 hours ago,Gain 48% of Damage as Extra Fire Damage,Sum: 103,Sum: 95,Sum: 253
1/11/2026, 14:45:17,65d39785632981110d508ec8acb2e528f37942aacdf93c5c6581911c6af2e825,Victory Beam,1000,398,Soulbands#3664,listed 6 hours ago,49% increased Cast Speed,Sum: 116,Sum: 81,Sum: 201
1/11/2026, 14:52:32,d5a24775626affb65c91501a272f3f5419561a03eea0e19e0c6ae770f494f7b6,Doom Spell,300,436,lopkoTheGod#4261,listed 6 minutes ago,177% increased Spell Damage with Spells that cost Life,Sum: 59,Sum: 107,Sum: 270
1/11/2026, 15:00:16,4fa095286c0166001b6be089ed98fd1f570d6b25f2aa7d1c0dc2b274b8bf9524,Pandemonium Spell,680,399,relicym#2478,listed 4 minutes ago,208% increased Spell Damage,Sum: 110,Sum: 81,Sum: 208,PRICE DROP (Was 800)
1/11/2026, 15:15:22,0af48314bb81af9bb14e403a564fb1e19ab2b28aa05bf292fd6fb6d6c095cfac,Onslaught Roar,650,355,Baloch#1592,listed an hour ago,80% increased Critical Hit Chance for Spells,Sum: 50,Sum: 80,Sum: 225
`;

        const parseData = (csv) => {
            return csv.trim().split('\n').map(line => {
                const parts = line.split(',');
                const price = parseInt(parts[4]) || 0;
                const score = parseInt(parts[5]) || 0;
                return {
                    name: parts[3],
                    price: price,
                    score: score,
                    ratio: price > 0 ? (score / price).toFixed(2) : 0,
                    seller: parts[6],
                    isDrop: line.includes('PRICE DROP')
                };
            }).filter(i => i.price > 0);
        };

        const SimpleBarChart = ({ data }) => {
            const maxVal = Math.max(...data.map(d => d.price));
            return (
                <svg className="chart-svg" viewBox="0 0 400 200">
                    <line x1="40" y1="10" x2="40" y2="180" className="axis-line" />
                    <line x1="40" y1="180" x2="380" y2="180" className="axis-line" />
                    {data.slice(0, 10).map((d, i) => {
                        const barHeight = (d.price / maxVal) * 150;
                        return (
                            <g key={i}>
                                <rect 
                                    x={50 + (i * 30)} 
                                    y={180 - barHeight} 
                                    width="20" 
                                    height={barHeight} 
                                    className="bar" 
                                />
                                <text x={50 + (i * 30)} y="195" className="chart-label" transform={`rotate(45, ${50 + (i * 30)}, 195)`}>
                                    {d.name.split(' ')[0]}
                                </text>
                            </g>
                        );
                    })}
                </svg>
            );
        };

        const App = () => {
            const [search, setSearch] = useState('');
            const data = useMemo(() => parseData(RAW_DATA), []);
            
            const filtered = data.filter(d => 
                d.name.toLowerCase().includes(search.toLowerCase())
            );

            const avgPrice = Math.round(data.reduce((a, b) => a + b.price, 0) / data.length);

            return (
                <div className="container">
                    <header>
                        <h1>POE 2 Trade Terminal</h1>
                        <input 
                            className="search-bar" 
                            placeholder="Filter by item name..." 
                            onChange={(e) => setSearch(e.target.value)}
                        />
                    </header>

                    <div className="grid">
                        <div className="card">
                            <div>Avg Price</div>
                            <div className="stat-val">{avgPrice}c</div>
                        </div>
                        <div className="card">
                            <div>Total Listings</div>
                            <div className="stat-val">{data.length}</div>
                        </div>
                        <div className="card">
                            <div>Best Ratio</div>
                            <div className="stat-val">{Math.max(...data.map(d => d.ratio))}</div>
                        </div>
                    </div>

                    <div className="grid">
                        <div className="card" style={{gridColumn: "span 2"}}>
                            <h3>Price Distribution (Top 10)</h3>
                            <SimpleBarChart data={data} />
                        </div>
                    </div>

                    <div className="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Item Name</th>
                                    <th>Price</th>
                                    <th>Score</th>
                                    <th>Efficiency</th>
                                    <th>Seller</th>
                                </tr>
                            </thead>
                            <tbody>
                                {filtered.map((item, i) => (
                                    <tr key={i}>
                                        <td>
                                            {item.name} 
                                            {item.isDrop && <div className="price-drop">â–¼ DROP</div>}
                                        </td>
                                        <td>{item.price}c</td>
                                        <td>{item.score}</td>
                                        <td><span className="badge">{item.ratio}</span></td>
                                        <td>{item.seller}</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>